---
import Layout from "../../layouts/Layout.astro";
import { addOffre } from "../../js/backend.mjs";
import Cards from "../../components/Cards.astro";

let message = "";
if (Astro.request.method === "POST") {
    const formData = await Astro.request.formData();
    const response = await addOffre(formData);
    message = response.message;
}
---

<Layout titre="Ajouter une offre">
    <h1 class="text-lg m-5">Ajouter une offre</h1>
    {message && <p class="text-green-500">{message}</p>}
    <form
        class="flex flex-col p-4"
        action="/offres/add"
        method="post"
        enctype="multipart/form-data"
    >
        <input
            type="text"
            name="nom_maison"
            placeholder="Nom de la maison"
            required
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
        />
        <input
            type="number"
            name="prix"
            placeholder="Prix"
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
        />
        <input
            type="number"
            name="nb_sdb"
            placeholder="Nombre de salles de bain"
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
        />
        <input
            type="number"
            name="nb_chambres"
            placeholder="Nombre de chambres"
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
        />
        <input
            type="number"
            name="surface"
            placeholder="Superficie"
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
        />
        <input
            type="file"
            name="image"
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
        />
        <input
            type="submit"
            class="w-full mt-2 p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"
        />Ajouter
    </form>
</Layout>
